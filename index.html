<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Dice WebApp</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  background: #0f172a;
  color: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 30px;
}
button {
  padding: 12px 20px;
  margin: 6px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}
.bet { background: #22c55e; color: #000; }
.roll { background: #38bdf8; color: #000; }
</style>
</head>

<body>

<h2 id="title"></h2>
<p id="balance"></p>

<div id="bet-area">
  <button class="bet" onclick="bet(10)">10</button>
  <button class="bet" onclick="bet(20)">20</button>
  <button class="bet" onclick="bet(50)">50</button>
</div>

<div>
  <button class="roll" onclick="roll()">ðŸŽ² Roll</button>
</div>

<pre id="result"></pre>

<script>
/* ======================
   Telegram Init
====================== */
const tg = Telegram.WebApp;
tg.ready();

/* ======================
   ä¸‰è¯­å­—å…¸
====================== */
const I18N = {
  zh: {
    title: "ðŸŽ² éª°å­æ¸¸æˆï¼ˆGame1ï¼‰",
    balance: "ä½™é¢",
    bet_ok: "âœ… å·²ä¸‹æ³¨",
    roll_first: "è¯·å…ˆä¸‹æ³¨",
    win: "ðŸ† çŽ©å®¶èƒœåˆ©",
    lose: "âŒ çŽ©å®¶å¤±è´¥",
    draw: "ðŸ¤ å¹³å±€"
  },
  en: {
    title: "ðŸŽ² Dice Game (Game1)",
    balance: "Balance",
    bet_ok: "âœ… Bet placed",
    roll_first: "Please place a bet",
    win: "ðŸ† You Win",
    lose: "âŒ You Lose",
    draw: "ðŸ¤ Draw"
  },
  ms: {
    title: "ðŸŽ² Permainan Dadu (Game1)",
    balance: "Baki",
    bet_ok: "âœ… Pertaruhan diterima",
    roll_first: "Sila buat pertaruhan",
    win: "ðŸ† Anda Menang",
    lose: "âŒ Anda Kalah",
    draw: "ðŸ¤ Seri"
  }
};

/* ======================
   è¯­è¨€è‡ªåŠ¨è¯†åˆ«
====================== */
function detectLang() {
  const code = tg.initDataUnsafe?.user?.language_code || "en";
  if (code.startsWith("zh")) return "zh";
  if (code.startsWith("ms")) return "ms";
  return "en";
}

const LANG = detectLang();
const T = I18N[LANG];

/* ======================
   Game1 çŠ¶æ€
====================== */
let balance = 1000;
let currentBet = 0;

/* ======================
   UI åˆå§‹åŒ–
====================== */
document.getElementById("title").innerText = T.title;
updateBalance();

/* ======================
   Game1 é€»è¾‘
====================== */
function updateBalance() {
  document.getElementById("balance").innerText =
    `${T.balance}: ${balance}`;
}

function bet(amount) {
  currentBet = amount;
  document.getElementById("result").innerText =
    `${T.bet_ok}: ${amount}`;
}

function roll() {
  if (!currentBet) {
    document.getElementById("result").innerText = T.roll_first;
    return;
  }

  const player = Math.floor(Math.random() * 6) + 1;
  const banker = Math.floor(Math.random() * 6) + 1;

  let res;
  if (player > banker) {
    balance += currentBet;
    res = T.win;
  } else if (player < banker) {
    balance -= currentBet;
    res = T.lose;
  } else {
    res = T.draw;
  }

  currentBet = 0;
  updateBalance();

  document.getElementById("result").innerText =
    `ðŸŽ² çŽ©å®¶: ${player}\nðŸŽ² åº„å®¶: ${banker}\n\n${res}`;
}
</script>

</body>
</html>

